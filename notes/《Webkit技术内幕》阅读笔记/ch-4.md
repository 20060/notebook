## 资源加载和网络栈

### 高性能网络栈

#### DNS预取和TCP预连接（Preconnect）

DNS查询和TCP三次握手都是比较耗费时间的操作。  
文中给出的DNS查询大概平均为60~120ms，TCP三次握手也大概是几十毫秒。  
看似不太长的操作，但是因为一个页面肯定不会只有一两个资源文件，当文件多了的情况下，数十个叠加在一起的时间就会变得很大，所以，为了减少这一部分的时间，Chrome给出了如下两个解决方案：
1. DNS预取
2. TCP预连接

在HTML中，执行DNS预取的方式如下：
```html
<link rel="dns-prefetch" href="http://domain.com">
```

TCP预连接则不能够通过代码进行控制，是由`Chrome`的一个追踪技术来获取用户的访问路径，进行预测下一步用户可能会触发什么超链接，如果计算得出概率较大，则会进行TCP预连接。  

*P.S. 在chrome中，用户在地址栏中输入URL后，敲下回车之前其实已经开始进行DNS预取和TCP预连接了，可以自己本地启动一个服务查看log得到结果*  

### 实践：高效的资源使用策略

#### DNS和TCP连接

1. 减少链接的重定向，每次重定向都会导致浏览器去解析跳转后地址的DNS
2. 利用上边提到的DNS预取策略
3. 搭建支持SPDY协议的服务器
4. 避免错误的链接请求，如果页面中有一些无效的链接，直接移除它，而不要留在页面中。
